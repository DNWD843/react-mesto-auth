(this["webpackJsonpreact-mesto-auth"]=this["webpackJsonpreact-mesto-auth"]||[]).push([[0],{31:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(1),o=n.n(i),s=n(21),r=n.n(s),c=(n(31),n(10)),l=n(13),u=n(14),d=n(24),p=n(23),h=n(2),m=n(6),_=n(4);var b=function(e){var t=e.email,n=e.handleSignoutButtonClick,i=e.signOutButtonText,o=e.handleMenuClick,s=e.isMenuOpened,r=e.isDropdownMenu;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("ul",{className:"navbar ".concat(r?"navbar_type_mobile ".concat(s?"navbar_opened":""):""),children:[Object(a.jsx)("li",{className:"navbar__item",children:Object(a.jsx)(_.b,{to:"#",className:"navbar__link",children:t})}),Object(a.jsx)("li",{className:"navbar__item",children:Object(a.jsx)("button",{onClick:n,className:"button button_type_signout navbar__button-signout",children:i})})]}),!r&&Object(a.jsx)("button",{type:"button",title:"\u041c\u0435\u043d\u044e",onClick:o,className:"button navbar__menu-button ".concat(s?"navbar__menu-button_type_open":"navbar__menu-button_type_close")})]})},j=n.p+"static/media/headerLogo.a307e1c4.svg",f="/",O="/sign-in",g="/sign-up";var v=function(e){return Object(a.jsxs)("header",{className:"header page__header",children:[Object(a.jsx)("img",{className:"header__logo",src:j,alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f \u043f\u0440\u043e\u0435\u043a\u0442\u0430 '\u041c\u0435\u0441\u0442\u043e-\u0420\u043e\u0441\u0441\u0438\u044f'"}),Object(a.jsxs)(h.d,{children:[Object(a.jsx)(h.b,{path:O,children:Object(a.jsx)(_.b,{to:g,className:"header__link",children:e.signupLinkText})}),Object(a.jsx)(h.b,{path:g,children:Object(a.jsx)(_.b,{to:O,className:"header__link",children:e.signinLinkText})}),Object(a.jsx)(h.b,{path:f,exact:!0,children:Object(a.jsx)(b,Object(m.a)({},e))})]})]})},x=o.a.createContext({});var k=function(e){var t=e.id,n=e.link,i=e.title,s=e.likesQuantity,r=e.owner,c=e.likes,l=e.onCardClick,u=e.onCardLike,d=e.onCardDelete,p=o.a.useContext(x),h=r._id===p._id,m=c.some((function(e){return e._id===p._id}));return Object(a.jsxs)("li",{className:"card",children:[Object(a.jsx)("img",{className:"card__image",onClick:function(){l({link:n,title:i})},src:n,alt:i,name:"photo",title:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0444\u043e\u0442\u043e"}),Object(a.jsx)("button",{type:"button",onClick:function(){d({id:t})},className:"button button_type_delete card__delete-button ".concat(h?"card__delete-button_enabled":""),name:"delete-button",value:"delete",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u043e\u0442\u043e"}),Object(a.jsxs)("div",{className:"card__description",children:[Object(a.jsx)("h2",{className:"card__title",children:i}),Object(a.jsxs)("div",{className:"card__like-info",children:[Object(a.jsx)("button",{type:"button",onClick:function(){u({id:t,likes:c})},className:"button button_type_like card__like-button  ".concat(m?"button_like-status_checked":"button_like-status_not-checked"),name:"like-button",value:"like"}),Object(a.jsx)("span",{className:"card__like-counter",children:s})]})]})]})};var C=function(e){var t=o.a.useContext(x);return Object(a.jsxs)("main",{className:"content page__content",children:[Object(a.jsxs)("section",{className:"user-profile content__user-profile",children:[Object(a.jsx)("button",{type:"button",onClick:e.onEditAvatar,className:"button  user-profile__avatar-button",style:{backgroundImage:"url(".concat(t.avatar,")")},name:"edit-avatar-form-button",id:"edit-avatar-form-button",value:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440"}),Object(a.jsxs)("div",{className:"user-profile__user-info",children:[Object(a.jsx)("h1",{className:"user-profile__user-name",children:t.name}),Object(a.jsx)("button",{type:"button",onClick:e.onEditProfile,className:"button button_type_edit user-profile__edit-button",name:"edit-profile-form-button",id:"edit-profile-form-button",value:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0444\u043e\u0440\u043c\u0443",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(a.jsx)("p",{className:"user-profile__user-job",children:t.about})]}),Object(a.jsx)("button",{type:"button",onClick:e.onAddPlace,className:"button button_type_add user-profile__add-button",name:"add-photo-form-button",id:"add-photo-form-button",value:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e",title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e"})]},"user-profile"),Object(a.jsx)("section",{className:"photo content__photo",children:Object(a.jsx)("ul",{className:"photo__cards",children:e.cards.map((function(t){return Object(a.jsx)(k,Object(m.a)(Object(m.a)({},t),{},{onCardClick:e.onCardClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete}),t.id)}))})},"photo-cards")]})};var y=function(){return Object(a.jsx)(h.b,{path:f,exact:!0,children:Object(a.jsx)("footer",{className:"footer",children:Object(a.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Mesto Russia"})})})};var L=function(e){return Object(a.jsx)("div",{onClick:e.onOverlayClick,className:"popup page__overlay page__overlay_theme_dark popup_type_view-photo ".concat(e.isOpen?"popup_opened":""),id:"view",children:Object(a.jsxs)("div",{className:"popup__container",children:[Object(a.jsx)("button",{type:"button",onClick:e.onClose,className:"button button_type_close popup__close-button popup__close-button_type_photo",name:"close-photo",value:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0444\u043e\u0442\u043e"}),Object(a.jsxs)("figure",{className:"popup__photo-content",children:[Object(a.jsx)("img",{className:"popup__place-image",src:"".concat(e.card?e.card.link:"#","  "),alt:"".concat(e.card?e.card.title:"\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435")}),Object(a.jsx)("figcaption",{className:"popup__place-name",children:"".concat(e.card?e.card.title:"\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435")})]})]})})},N=new(function(){function e(t){var n=t.URLs,a=t.headers,i=t.token;Object(l.a)(this,e),this._baseURL=n.baseURL,this._cardsURL=n.cardsURL,this._userURL=n.userURL,this._likesURL=n.likesURL,this._avatarURL=n.avatarURL,this._headers=a,this._token=i}return Object(u.a)(e,[{key:"loadUserData",value:function(){return fetch(this._userURL,{headers:{authorization:this._token}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"loadCards",value:function(){return fetch(this._cardsURL,{headers:{authorization:this._token}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"addNewCard",value:function(e){return fetch(this._cardsURL,{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._cardsURL).concat(e),{method:"DELETE",headers:{authorization:this._token}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"editProfile",value:function(e){var t=e.name,n=e.about;return fetch("".concat(this._userURL),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t,about:n})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"changeLikeCardStatus",value:function(e,t){return fetch("".concat(this._likesURL).concat(e),{method:"".concat(t?"PUT":"DELETE"),headers:{authorization:this._token}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"editAvatar",value:function(e){return fetch("".concat(this._avatarURL),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}}]),e}())({URLs:{baseURL:"https://mesto.nomoreparties.co/v1/cohort-14/",cardsURL:"https://mesto.nomoreparties.co/v1/cohort-14/cards/",userURL:"https://mesto.nomoreparties.co/v1/cohort-14/users/me/",likesURL:"https://mesto.nomoreparties.co/v1/cohort-14/cards/likes/",avatarURL:"https://mesto.nomoreparties.co/v1/cohort-14/users/me/avatar/"},headers:{authorization:"85abb6e6-ccb0-45c7-b6e8-4ffe1f5da546"},token:"85abb6e6-ccb0-45c7-b6e8-4ffe1f5da546"});var S=function(e){return Object(a.jsx)("div",{onClick:e.onOverlayClick,className:"popup page__overlay page__overlay_theme_light popup_type_".concat(e.name," ").concat(e.isOpen?"popup_opened":""),id:e.name,children:Object(a.jsxs)("div",{className:"popup__container",children:[Object(a.jsx)("button",{type:"button",onClick:e.onClose,className:"button button_type_close popup__close-button popup__close-button_type_modal",name:"close-popup",value:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}),Object(a.jsxs)("form",{onSubmit:e.onSubmit,className:"form popup__form form_type_".concat(e.name),name:"".concat(e.name,"-form"),id:"".concat(e.name,"-form"),children:[Object(a.jsx)("h2",{className:"form__title",children:e.title}),e.children,Object(a.jsx)("button",{type:"submit",disabled:e.isDisabled,className:"button ".concat(e.isDisabled?"button_type_submit-inactive":"button_type_submit"," form__submit-button"),name:"".concat(e.name,"-button"),value:e.submitButtonText,children:e.isLoading?e.preloaderText:e.submitButtonText})]})]})})},P=n(12);function T(){var e=Object(i.useState)({}),t=Object(c.a)(e,2),n=t[0],a=t[1],o=Object(i.useState)({}),s=Object(c.a)(o,2),r=s[0],l=s[1],u=Object(i.useState)(!1),d=Object(c.a)(u,2),p=d[0],h=d[1],_=Object(i.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a(e),l(t),h(n)}),[a,l,h]);return{values:n,errors:r,isValid:p,handleInputChange:function(e){var t=e.target,i=t.name,o=t.value;a(Object(m.a)(Object(m.a)({},n),{},Object(P.a)({},i,o))),l(Object(m.a)(Object(m.a)({},r),{},Object(P.a)({},i,e.target.validationMessage))),h(e.target.closest("form").checkValidity())},setValues:a,resetForm:_}}var E=function(e){var t=e.isOpen,n=e.isLoading,i=e.onClose,s=e.onOverlayClick,r=e.onUpdateUser,c=T(),l=c.values,u=c.errors,d=c.isValid,p=c.handleInputChange,h=c.resetForm,m=o.a.useContext(x),_=l.name,b=l.description;return o.a.useEffect((function(){h({name:m.name,description:m.about},{},!0)}),[t]),Object(a.jsx)(S,{name:"edit-profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",submitButtonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:i,onOverlayClick:s,onSubmit:function(e){e.preventDefault(),r({name:_,about:b})},isLoading:n,preloaderText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...",isDisabled:!d,children:Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("ul",{className:"form__inputs",children:[Object(a.jsxs)("li",{className:"form__field",children:[Object(a.jsx)("input",{id:"user-name-input",name:"name",type:"text",onChange:p,value:_||"",className:"form__input form__input_type_name",placeholder:"\u0418\u043c\u044f",required:!0,minLength:"1",maxLength:"30"}),Object(a.jsx)("span",{className:"form__input-error",id:"edit-profile-input-error",children:u.name||""})]}),Object(a.jsxs)("li",{className:"form__field",children:[Object(a.jsx)("input",{id:"user-job-input",name:"description",type:"text",onChange:p,value:b||"",className:"form__input form__input_type_job",placeholder:"\u041e \u0441\u0435\u0431\u0435",required:!0,minLength:"3",maxLength:"35"}),Object(a.jsx)("span",{className:"form__input-error",id:"edit-profile-input-error",children:u.description||""})]})]})})})},w=function(e){var t=e.isOpen,n=e.isLoading,i=e.onClose,s=e.onOverlayClick,r=e.onUpdateAvatar,c=T(),l=c.values,u=c.errors,d=c.isValid,p=c.handleInputChange,h=c.resetForm,m=l.avatar;return o.a.useEffect((function(){h({},{},!1)}),[t]),Object(a.jsx)(S,{name:"edit-avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",submitButtonText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",isOpen:t,onClose:i,onOverlayClick:s,onSubmit:function(e){e.preventDefault(),r({avatar:m})},isLoading:n,preloaderText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...",isDisabled:!d,children:Object(a.jsx)("ul",{className:"form__inputs",children:Object(a.jsxs)("li",{className:"form__field",children:[Object(a.jsx)("input",{id:"avatar-link-input",name:"avatar",type:"url",onChange:p,value:m||"",className:"form__input form__input_type_avatar-link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),Object(a.jsx)("span",{className:"form__input-error",id:"avatar-link-input-error",children:u.avatar})]})})})},U=function(e){var t=e.isOpen,n=e.isLoading,i=e.onClose,s=e.onOverlayClick,r=e.onSubmit,c=T(),l=c.values,u=c.errors,d=c.isValid,p=c.handleInputChange,h=c.resetForm,m=l.title,_=l.link;return o.a.useEffect((function(){h({},{},!1)}),[t]),Object(a.jsx)(S,{name:"add-photo",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",submitButtonText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",isOpen:t,onClose:i,onOverlayClick:s,onSubmit:function(e){e.preventDefault(),r({name:m,link:_})},isLoading:n,preloaderText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...",isDisabled:!d,children:Object(a.jsxs)("ul",{className:"form__inputs",children:[Object(a.jsxs)("li",{className:"form__field",children:[Object(a.jsx)("input",{id:"place-title-input",name:"title",type:"text",onChange:p,value:m||"",className:"form__input form__input_type_place-title",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,minLength:"3",maxLength:"30"}),Object(a.jsx)("span",{className:"form__input-error",children:u.title})]}),Object(a.jsxs)("li",{className:"form__field",children:[Object(a.jsx)("input",{id:"image-link-input",name:"link",type:"url",onChange:p,value:_||"",className:"form__input form__input_type_image-link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),Object(a.jsx)("span",{className:"form__input-error",children:u.link})]})]})})};var D=function(e){return Object(a.jsx)(S,{name:"confirm",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",submitButtonText:"\u0414\u0430",onClose:e.onClose,onOverlayClick:e.onOverlayClick,isOpen:e.isOpen,onSubmit:e.onSubmit,isLoading:e.isProcessing,preloaderText:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435...",isReadyToSubmit:!0})};var A=function(e){var t=e.name,n=e.isOpen,i=e.onClose,o=e.onOverlayClick,s=e.titleTextSuccess,r=e.titleTextFail,c=e.loggedIn;return Object(a.jsx)("div",{onClick:o,className:"popup page__overlay page__overlay_theme_light popup_type_".concat(t," ").concat(n?"popup_opened":""),id:t,children:Object(a.jsxs)("div",{className:"popup__container",children:[Object(a.jsx)("button",{type:"button",onClick:i,className:"button button_type_close popup__close-button popup__close-button_type_info-tool-tip",name:"close-popup",value:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}),Object(a.jsxs)("div",{className:"info-tool-tip popup__info-tool-tip",children:[Object(a.jsx)("div",{className:"info-tool-tip__image ".concat(c?"info-tool-tip__image_type_success":"info-tool-tip__image_type_fail")}),Object(a.jsx)("p",{className:"info-tool-tip__title",children:c?s:r})]})]})})};var I=function(e){var t=e.name,n=e.title,i=e.onSubmit,o=e.isDisabled,s=e.isLoading,r=e.submitButtonText,c=e.preloaderText,l=e.redirectTitleText,u=e.redirectLinkText,d=e.children;return Object(a.jsx)("div",{className:"start-page-container page__start-page-container",children:Object(a.jsxs)("form",{onSubmit:i,className:"form start-page-container__form form_type_".concat(t),name:"".concat(t,"-form"),id:"".concat(t,"-form"),children:[Object(a.jsx)("h2",{className:"form__title form__title_type_start",children:n}),d,Object(a.jsx)("button",{type:"submit",disabled:o,className:"button ".concat(o?"button_type_submit-inactive":"button_type_submit-start"," form__submit-button form__submit-button_type_start"),name:"".concat(t,"-button"),value:r,children:s?c:r}),Object(a.jsxs)(h.d,{children:[Object(a.jsx)(h.b,{path:g,children:Object(a.jsxs)("p",{className:"form__redirect-title",children:[l,Object(a.jsx)(_.b,{to:O,className:"form__redirect-link",children:u})]})}),Object(a.jsx)(h.b,{path:O,children:Object(a.jsxs)("p",{className:"form__redirect-title hidden-block",children:[l,Object(a.jsx)(_.b,{to:"#",className:"form__redirect-link hidden-block",children:u})]})})]})]})})};var R=function(e){var t=e.isLoading,n=e.handleLogin,o=e.userData,s=T(),r=s.values,c=s.errors,l=s.isValid,u=s.handleInputChange,d=s.resetForm,p=r.login,h=r.password;return Object(i.useEffect)((function(){d({login:o.email,password:o.password},{})}),[]),Object(a.jsx)(I,{name:"login",title:"\u0412\u0445\u043e\u0434",onSubmit:function(e){e.preventDefault(),n({password:h,login:p})},isDisabled:!l,isLoading:t,submitButtonText:"\u0412\u043e\u0439\u0442\u0438",preloaderText:"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0432\u0445\u043e\u0434...",redirectTitleText:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",redirectLinkText:"\u0412\u043e\u0439\u0442\u0438",children:Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("ul",{className:"form__inputs form__inputs_type_start",children:[Object(a.jsxs)("li",{className:"form__field form__field_type_start",children:[Object(a.jsx)("input",{id:"user-login",name:"login",type:"email",onChange:u,onFocus:u,value:p||"",className:"form__input form__input_type_start form__input_type_user-login",placeholder:"Email",required:!0}),Object(a.jsx)("span",{className:"form__input-error",id:"user-login-input-error",children:c.login||""})]}),Object(a.jsxs)("li",{className:"form__field",children:[Object(a.jsx)("input",{id:"user-password",name:"password",type:"password",onChange:u,onFocus:u,value:h||"",className:"form__input form__input_type_start form__input_type_user-password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0,minLength:"3",maxLength:"35"}),Object(a.jsx)("span",{className:"form__input-error",id:"user-password-input-error",children:c.password||""})]})]})})})};var B=function(e){var t=e.isLoading,n=e.handleRegister,o=T(),s=o.values,r=o.errors,c=o.isValid,l=o.handleInputChange,u=o.resetForm,d=s.regEmail,p=s.regPassword;return Object(i.useEffect)((function(){u({},{},!1)}),[]),Object(a.jsx)(I,{name:"register",title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",onSubmit:function(e){e.preventDefault(),n({email:d,password:p})},isDisabled:!c,isLoading:t,submitButtonText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",preloaderText:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f...",redirectTitleText:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",redirectLinkText:"\u0412\u043e\u0439\u0442\u0438",children:Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("ul",{className:"form__inputs form__inputs_type_start",children:[Object(a.jsxs)("li",{className:"form__field form__field_type_start",children:[Object(a.jsx)("input",{id:"reg-email",name:"regEmail",type:"email",onChange:l,onFocus:l,value:d||"",className:"form__input form__input_type_start form__input_type_reg-email",placeholder:"Email",required:!0}),Object(a.jsx)("span",{className:"form__input-error",id:"user-email-input-error",children:r.regEmail||""})]}),Object(a.jsxs)("li",{className:"form__field",children:[Object(a.jsx)("input",{id:"reg-password",name:"regPassword",type:"password",onChange:l,onFocus:l,value:p||"",className:"form__input form__input_type_start form__input_type_reg-password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0,minLength:"3",maxLength:"35"}),Object(a.jsx)("span",{className:"form__input-error",id:"reg-password-input-error",children:r.regPassword||""})]})]})})})},M=n(25),F=function(e){var t=e.component,n=Object(M.a)(e,["component"]);return Object(a.jsx)(h.b,{children:function(){return n.loggedIn?Object(a.jsx)(t,Object(m.a)({},n)):Object(a.jsx)(h.a,{to:O})}})},q="token",z="https://auth.nomoreparties.co",V=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).closeAllPopups=function(){document.removeEventListener("keydown",e.handleEscClose),e.setState({isEditProfilePopupOpen:!1,isAddPlacePopupOpen:!1,isEditAvatarPopupOpen:!1,isDeleteConfirmPopupOpen:!1,isImagePopupOpen:!1,selectedCard:void 0,isInfoToolTipOpen:!1})},e.handleEscClose=function(t){"Escape"===t.key&&e.closeAllPopups()},e.handleClickOnOverlay=function(t){t.target===t.currentTarget&&e.closeAllPopups()},e.handleCardLike=function(t){var n=t.likes.some((function(t){return t._id===e.state.currentUser._id}));N.changeLikeCardStatus(t.id,!n).then((function(n){var a=e.state.cards.map((function(e){return e.id===t.id?{id:n._id,link:n.link,title:n.name,likesQuantity:n.likes.length,owner:n.owner,likes:n.likes}:e}));e.setState({cards:a})})).catch((function(e){console.log(e)}))},e.handleCardClick=function(t){document.addEventListener("keydown",e.handleEscClose),e.setState({selectedCard:t}),e.setState({isImagePopupOpen:!0})},e.handleCardDelete=function(t){e.setState({isDeleteConfirmPopupOpen:!0}),e.setState({selectedCard:t})},e.handleDeleteConfirm=function(t){t.preventDefault();var n=e.state.selectedCard;e.setState({isLoading:!0}),N.deleteCard(n.id).then((function(){var t=e.state.cards.filter((function(e){return e.id!==n.id}));e.setState({cards:t}),e.closeAllPopups()})).catch((function(e){console.log(e)})).finally((function(){e.setState({isLoading:!1})}))},e.handleEditAvatarClick=function(){document.activeElement.blur(),document.addEventListener("keydown",e.handleEscClose),e.setState({isEditAvatarPopupOpen:!0})},e.handleUpdateAvatar=function(t){var n=t.avatar;e.setState({isLoading:!0}),N.editAvatar(n).then((function(t){e.setState({currentUser:t}),e.closeAllPopups()})).catch((function(e){console.log(e)})).finally((function(){e.setState({isLoading:!1})}))},e.handleEditProfileClick=function(){document.activeElement.blur(),document.addEventListener("keydown",e.handleEscClose),e.setState({isEditProfilePopupOpen:!0})},e.handleUpdateUser=function(t){var n=t.name,a=t.about;e.setState({isLoading:!0}),N.editProfile({name:n,about:a}).then((function(t){e.setState({currentUser:t}),e.closeAllPopups()})).catch((function(e){console.log(e)})).finally((function(){e.setState({isLoading:!1})}))},e.handleAddPlaceClick=function(){document.activeElement.blur(),document.addEventListener("keydown",e.handleEscClose),e.setState({isAddPlacePopupOpen:!0})},e.handleAddPlaceSubmit=function(t){var n=t.name,a=t.link;e.setState({isLoading:!0}),N.addNewCard({name:n,link:a}).then((function(t){var n={id:t._id,link:t.link,title:t.name,likesQuantity:t.likes.length,owner:t.owner,likes:t.likes},a=e.state.cards.concat(n);e.setState({cards:a}),e.closeAllPopups()})).catch((function(e){console.log(e)})).finally((function(){e.setState({isLoading:!1})}))},e.handleRegister=function(t){var n=t.password,a=t.email;e.setState({isLoading:!0}),function(e,t){return fetch("".concat(z).concat("/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,email:t})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(n,a).then((function(t){t.data?e.props.history.push(O):e.setState({loggedIn:!1,isInfoToolTipOpen:!0},(function(){console.log(t)}))})).catch((function(e){return console.log(e)})).finally((function(){return e.setState({isLoading:!1})}))},e.handleLogin=function(t){var n=t.password,a=t.login;e.setState({isLoading:!0}),function(e,t){return fetch("".concat(z).concat("/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,email:t})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(n,a).then((function(t){var i;t.token?(i=t.token,localStorage.setItem(q,i),e.setState({loggedIn:!0,userData:{email:a,password:n},isInfoToolTipOpen:!0},(function(){e.props.history.push(f)}))):e.setState({loggedIn:!1,isInfoToolTipOpen:!0},(function(){console.log(t)}))})).catch((function(e){return console.log(e)})).finally((function(){return e.setState({isLoading:!1})}))},e.tokenCheck=function(){var t=localStorage.getItem(q);t&&function(e){return fetch("".concat(z).concat("/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t).then((function(t){t.data?e.setState({loggedIn:!0,userData:{email:t.data.email}},(function(){e.props.history.push(f)})):e.setState({loggedIn:!1,isInfoToolTipOpen:!0},(function(){console.log(t)}))})).catch((function(e){return console.log(e)}))},e.handleSignoutButtonClick=function(){e.setState({isMenuOpened:!1}),localStorage.removeItem(q),e.props.history.push(O)},e.handleMenuButtonClick=function(){e.setState({isMenuOpened:!e.state.isMenuOpened})},e.state={isEditProfilePopupOpen:!1,isAddPlacePopupOpen:!1,isEditAvatarPopupOpen:!1,isDeleteConfirmPopupOpen:!1,isImagePopupOpen:!1,selectedCard:void 0,currentUser:{},cards:[],isLoading:!1,loggedIn:!1,userData:{email:"",password:""},isInfoToolTipOpen:!1,isMenuOpened:!1},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.tokenCheck(),Promise.all([N.loadUserData(),N.loadCards()]).then((function(t){var n=Object(c.a)(t,2),a=n[0],i=n[1];e.setState({currentUser:a});var o=i.map((function(e){return{id:e._id,link:e.link,title:e.name,likesQuantity:e.likes.length,owner:e.owner,likes:e.likes}}));e.setState({cards:o})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(x.Provider,{value:this.state.currentUser,children:[Object(a.jsx)(b,{signOutButtonText:"\u0412\u044b\u0439\u0442\u0438",handleSignoutButtonClick:this.handleSignoutButtonClick,email:this.state.userData.email,handleMenuClick:this.handleMenuButtonClick,isMenuOpened:this.state.isMenuOpened,isDropdownMenu:!0}),Object(a.jsx)(v,{signinLinkText:"\u0412\u043e\u0439\u0442\u0438",signupLinkText:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",signOutButtonText:"\u0412\u044b\u0439\u0442\u0438",handleSignoutButtonClick:this.handleSignoutButtonClick,email:this.state.userData.email,handleMenuClick:this.handleMenuButtonClick,isMenuOpened:this.state.isMenuOpened,isDropdownMenu:!1}),Object(a.jsxs)(h.d,{children:[Object(a.jsx)(F,{path:f,exact:!0,loggedIn:this.state.loggedIn,onEditProfile:this.handleEditProfileClick,onAddPlace:this.handleAddPlaceClick,onEditAvatar:this.handleEditAvatarClick,onCardClick:this.handleCardClick,onCardLike:this.handleCardLike,onCardDelete:this.handleCardDelete,cards:this.state.cards,component:C}),Object(a.jsx)(h.b,{path:g,children:Object(a.jsx)(B,{isLoading:this.state.isLoading,handleRegister:this.handleRegister})}),Object(a.jsx)(h.b,{path:O,children:Object(a.jsx)(R,{isLoading:this.state.isLoading,handleLogin:this.handleLogin,userData:this.state.userData})}),Object(a.jsx)(h.b,{path:f,children:this.state.loggedIn?Object(a.jsx)(h.a,{to:f}):Object(a.jsx)(h.a,{to:O})})]}),Object(a.jsx)(y,{}),Object(a.jsx)(E,{isOpen:this.state.isEditProfilePopupOpen,onClose:this.closeAllPopups,onOverlayClick:this.handleClickOnOverlay,onUpdateUser:this.handleUpdateUser,isLoading:this.state.isLoading}),Object(a.jsx)(w,{isOpen:this.state.isEditAvatarPopupOpen,onClose:this.closeAllPopups,onOverlayClick:this.handleClickOnOverlay,onUpdateAvatar:this.handleUpdateAvatar,isLoading:this.state.isLoading}),Object(a.jsx)(U,{isOpen:this.state.isAddPlacePopupOpen,onClose:this.closeAllPopups,onOverlayClick:this.handleClickOnOverlay,onSubmit:this.handleAddPlaceSubmit,isLoading:this.state.isLoading}),Object(a.jsx)(D,{isOpen:this.state.isDeleteConfirmPopupOpen,onClose:this.closeAllPopups,onOverlayClick:this.handleClickOnOverlay,onSubmit:this.handleDeleteConfirm,isProcessing:this.state.isLoading}),Object(a.jsx)(L,{card:this.state.selectedCard,onClose:this.closeAllPopups,onOverlayClick:this.handleClickOnOverlay,isOpen:this.state.isImagePopupOpen}),Object(a.jsx)(A,{name:"info-tool-tip",isOpen:this.state.isInfoToolTipOpen,onClose:this.closeAllPopups,onOverlayClick:this.handleClickOnOverlay,titleTextSuccess:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!",titleTextFail:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.",loggedIn:this.state.loggedIn})]})})}}]),n}(o.a.Component),J=Object(h.g)(V);r.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(_.a,{children:Object(a.jsx)(J,{})})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.e8472f4f.chunk.js.map